<div id="wrapper1">
<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
<script src="/js/d3-tip.js"></script>
<script>
    
var width = 700,
    height = 430,
    wrapper = d3.select("#wrapper1")
        .attr(
            "style",
            "padding-bottom: " + Math.ceil(height * 100 / width) + "%"
        )
        .append("svg")
        .attr("viewBox", "0 0 " + width + " " + height);  
    
var colorScheme = d3.scaleOrdinal(d3.schemeCategory20b);
    
var simulation = d3.forceSimulation()
    .force("link", d3.forceLink().id(function(d) { return d.id; }))
    .force("charge", d3.forceManyBody())
    .force("center", d3.forceCenter(width / 2, height / 2))
    .force("collide", d3.forceCollide().radius(function(d) { return d.r + 10; }).iterations(5));

var nodesLink = [
 {
   "id": "Department of Bioengineering and Therapeutic Sciences, California Institute for Quantitative Biosciences (QB3), University of California, San Francisco",
   "group": "10.1016/j.cell.2014.07.044"
 },
 {
   "id": "Faculty of Science, University of Zurich",
   "group": "10.1016/j.cell.2014.07.044"
 },
 {
   "id": "Institute of Molecular Biology and Biophysics, Department of Biology, ETH Zurich",
   "group": "10.1016/j.cell.2014.07.044"
 },
 {
   "id": "Institute of Molecular Systems Biology, Department of Biology, ETH Zurich",
   "group": "10.1016/j.cell.2014.07.044"
 },
 {
   "id": "Institute of Biochemistry, Department of Biology, ETH Zurich",
   "group": "10.1016/j.febslet.2014.08.013"
 },
 {
   "id": "Molecular Life Sciences Ph.D. Program",
   "group": "10.1016/j.febslet.2014.08.013"
 },
 {
   "id": "Competence Center of Systems Physiology and Metabolic Disease, ETH Zurich",
   "group": "10.1016/j.molcel.2014.03.045"
 },
 {
   "id": "Computational and Systems Biology Program, Massachusetts Institute of Technology",
   "group": "10.1016/j.molcel.2014.03.045"
 },
 {
   "id": "Department of Biology, Massachusetts Institute of Technology",
   "group": "10.1016/j.molcel.2014.03.045"
 },
 {
   "id": "Howard Hughes Medical Institute and Whitehead Institute for Biomedical Research",
   "group": "10.1016/j.molcel.2014.03.045"
 },
 {
   "id": "Institute of Molecular Health Sciences, Department of Biology, ETH Zurich",
   "group": "10.1016/j.molcel.2014.03.045"
 },
 {
   "id": "Institute of Biochemistry, Department of Biology, ETH Zurich",
   "group": "10.1016/j.tcb.2014.08.007"
 },
 {
   "id": "Swiss Institute for Experimental Cancer Research (ISREC), School of Life Sciences, Ecole Polytechnique Fédérale de Lausanne (EPFL)",
   "group": "10.1016/j.tcb.2014.08.007"
 },
 {
   "id": "Faculty of Science, University of Zurich",
   "group": "10.1038/nature13895"
 },
 {
   "id": "Institute of Molecular Biology and Biophysics, Department of Biology, ETH Zurich",
   "group": "10.1038/nature13895"
 },
 {
   "id": "Institute of Molecular Systems Biology, Department of Biology, ETH Zurich",
   "group": "10.1038/nature13895"
 },
 {
   "id": "Bioinformatics and Biostatistics Core Facility, EPFL, Swiss Institute of Bioinformatics",
   "group": "10.1038/ncomms6379"
 },
 {
   "id": "Ecole Polytechnique Fédérale de Lausanne (EPFL), School of Life Sciences",
   "group": "10.1038/ncomms6379"
 },
 {
   "id": "Institute of Molecular Cancer Research, University of Zurich",
   "group": "10.1038/ncomms6379"
 },
 {
   "id": "Swiss Institute for Experimental Cancer Research (ISREC), School of Life Sciences, Ecole Polytechnique Fédérale de Lausanne (EPFL)",
   "group": "10.1038/ncomms6379"
 },
 {
   "id": "Wistar Institute",
   "group": "10.1038/ncomms6379"
 },
 {
   "id": "Department of Chemistry and Biochemistry, University of Bern",
   "group": "10.1080/15476286.2014.996459"
 },
 {
   "id": "Graduate School for Cellular and Biomedical Sciences, University of Bern",
   "group": "10.1080/15476286.2014.996459"
 },
 {
   "id": "Department of Biochemistry, Henry Wellcome Laboratories of Structural Biology, University of Leicester",
   "group": "10.1093/nar/gku1116"
 },
 {
   "id": "Institute of Molecular Biology and Biophysics, Department of Biology, ETH Zurich",
   "group": "10.1093/nar/gku1116"
 },
 {
   "id": "Biozentrum, University of Basel",
   "group": "10.1172/JCI73066"
 },
 {
   "id": "Competence Center of Systems Physiology and Metabolic Disease, ETH Zurich",
   "group": "10.1172/JCI73066"
 },
 {
   "id": "Department of Clinical Sciences Malmö, Lund University Diabetes Centre, Lund University",
   "group": "10.1172/JCI73066"
 },
 {
   "id": "Faculty of Medicine, University of Zurich",
   "group": "10.1172/JCI73066"
 },
 {
   "id": "Institute of Laboratory Animal Science, Vetmeduni Vienna",
   "group": "10.1172/JCI73066"
 },
 {
   "id": "Institute of Molecular Health Sciences, Department of Biology, ETH Zurich",
   "group": "10.1172/JCI73066"
 },
 {
   "id": "Oxford Centre for Diabetes, Endocrinology and Metabolism, University of Oxford, Churchill Hospital",
   "group": "10.1172/JCI73066"
 },
 {
   "id": "Université de Lille 2, INSERM, European Genomic Institute for Diabetes",
   "group": "10.1172/JCI73066"
 },
 {
   "id": "Biozentrum, University of Basel",
   "group": "10.15252/embr.201540078"
 },
 {
   "id": "Department of Anaesthesiology and Pain Medicine, Inselspital, University of Bern",
   "group": "10.15252/embr.201540078"
 },
 {
   "id": "Friedrich Miescher Institute for Biomedical Research",
   "group": "10.15252/embr.201540078"
 },
 {
   "id": "Institute of Molecular Life Sciences, University of Zurich",
   "group": "10.15252/embr.201540078"
 },
 {
   "id": "Swiss Institute of Bioinformatics",
   "group": "10.15252/embr.201540078"
 },
 {
   "id": "University of Basel, Faculty of Science",
   "group": "10.15252/embr.201540078"
 }
];	
    
var nodes = [
 {
   "id": "Bioinformatics and Biostatistics Core Facility, EPFL, Swiss Institute of Bioinformatics"
 },
 {
   "id": "Biozentrum, University of Basel"
 },
 {
   "id": "Competence Center of Systems Physiology and Metabolic Disease, ETH Zurich"
 },
 {
   "id": "Computational and Systems Biology Program, Massachusetts Institute of Technology"
 },
 {
   "id": "Department of Anaesthesiology and Pain Medicine, Inselspital, University of Bern"
 },
 {
   "id": "Department of Biochemistry, Henry Wellcome Laboratories of Structural Biology, University of Leicester"
 },
 {
   "id": "Department of Bioengineering and Therapeutic Sciences, California Institute for Quantitative Biosciences (QB3), University of California, San Francisco"
 },
 {
   "id": "Department of Biology, Massachusetts Institute of Technology"
 },
 {
   "id": "Department of Chemistry and Biochemistry, University of Bern"
 },
 {
   "id": "Department of Clinical Sciences Malmö, Lund University Diabetes Centre, Lund University"
 },
 {
   "id": "Ecole Polytechnique Fédérale de Lausanne (EPFL), School of Life Sciences"
 },
 {
   "id": "Faculty of Medicine, University of Zurich"
 },
 {
   "id": "Faculty of Science, University of Zurich"
 },
 {
   "id": "Friedrich Miescher Institute for Biomedical Research"
 },
 {
   "id": "Graduate School for Cellular and Biomedical Sciences, University of Bern"
 },
 {
   "id": "Howard Hughes Medical Institute and Whitehead Institute for Biomedical Research"
 },
 {
   "id": "Institute of Biochemistry, Department of Biology, ETH Zurich"
 },
 {
   "id": "Institute of Laboratory Animal Science, Vetmeduni Vienna"
 },
 {
   "id": "Institute of Molecular Biology and Biophysics, Department of Biology, ETH Zurich"
 },
 {
   "id": "Institute of Molecular Cancer Research, University of Zurich"
 },
 {
   "id": "Institute of Molecular Health Sciences, Department of Biology, ETH Zurich"
 },
 {
   "id": "Institute of Molecular Life Sciences, University of Zurich"
 },
 {
   "id": "Institute of Molecular Systems Biology, Department of Biology, ETH Zurich"
 },
 {
   "id": "Molecular Life Sciences Ph.D. Program"
 },
 {
   "id": "Oxford Centre for Diabetes, Endocrinology and Metabolism, University of Oxford, Churchill Hospital"
 },
 {
   "id": "Swiss Institute for Experimental Cancer Research (ISREC), School of Life Sciences, Ecole Polytechnique Fédérale de Lausanne (EPFL)"
 },
 {
   "id": "Swiss Institute of Bioinformatics"
 },
 {
   "id": "Université de Lille 2, INSERM, European Genomic Institute for Diabetes"
 },
 {
   "id": "University of Basel, Faculty of Science"
 },
 {
   "id": "Wistar Institute"
 }
];
    
var nodesDoi = [
 {
   "name": "Department of Bioengineering and Therapeutic Sciences, California Institute for Quantitative Biosciences (QB3), University of California, San Francisco",
   "DOI1": "10.1016/j.cell.2014.07.044"
 },
 {
   "name": "Faculty of Science, University of Zurich",
   "DOI1": "10.1016/j.cell.2014.07.044",
   "DOI2": "10.1038/nature13895"
 },
 {
   "name": "Institute of Molecular Biology and Biophysics, Department of Biology, ETH Zurich",
   "DOI1": "10.1016/j.cell.2014.07.044",
   "DOI2": "10.1038/nature13895",
   "DOI3": "10.1093/nar/gku1116"
 },
 {
   "name": "Institute of Molecular Systems Biology, Department of Biology, ETH Zurich",
   "DOI1": "10.1016/j.cell.2014.07.044",
   "DOI2": "10.1038/nature13895"
 },
 {
   "name": "Institute of Biochemistry, Department of Biology, ETH Zurich",
   "DOI1": "10.1016/j.febslet.2014.08.013",
   "DOI2": "10.1016/j.tcb.2014.08.007"
 },
 {
   "name": "Molecular Life Sciences Ph.D. Program",
   "DOI1": "10.1016/j.febslet.2014.08.013"
 },
 {
   "name": "Competence Center of Systems Physiology and Metabolic Disease, ETH Zurich",
   "DOI1": "10.1016/j.molcel.2014.03.045",
   "DOI2": "10.1172/JCI73066"
 },
 {
   "name": "Computational and Systems Biology Program, Massachusetts Institute of Technology",
   "DOI1": "10.1016/j.molcel.2014.03.045"
 },
 {
   "name": "Department of Biology, Massachusetts Institute of Technology",
   "DOI1": "10.1016/j.molcel.2014.03.045"
 },
 {
   "name": "Howard Hughes Medical Institute and Whitehead Institute for Biomedical Research",
   "DOI1": "10.1016/j.molcel.2014.03.045"
 },
 {
   "name": "Institute of Molecular Health Sciences, Department of Biology, ETH Zurich",
   "DOI1": "10.1016/j.molcel.2014.03.045",
   "DOI2": "10.1172/JCI73066"
 },
 {
   "name": "Swiss Institute for Experimental Cancer Research (ISREC), School of Life Sciences, Ecole Polytechnique Fédérale de Lausanne (EPFL)",
   "DOI1": "10.1016/j.tcb.2014.08.007",
   "DOI2": "10.1038/ncomms6379"
 },
 {
   "name": "Bioinformatics and Biostatistics Core Facility, EPFL, Swiss Institute of Bioinformatics",
   "DOI1": "10.1038/ncomms6379"
 },
 {
   "name": "Ecole Polytechnique Fédérale de Lausanne (EPFL), School of Life Sciences",
   "DOI1": "10.1038/ncomms6379"
 },
 {
   "name": "Institute of Molecular Cancer Research, University of Zurich",
   "DOI1": "10.1038/ncomms6379"
 },
 {
   "name": "Wistar Institute",
   "DOI1": "10.1038/ncomms6379"
 },
 {
   "name": "Department of Chemistry and Biochemistry, University of Bern",
   "DOI1": "10.1080/15476286.2014.996459"
 },
 {
   "name": "Graduate School for Cellular and Biomedical Sciences, University of Bern",
   "DOI1": "10.1080/15476286.2014.996459"
 },
 {
   "name": "Department of Biochemistry, Henry Wellcome Laboratories of Structural Biology, University of Leicester",
   "DOI1": "10.1093/nar/gku1116"
 },
 {
   "name": "Biozentrum, University of Basel",
   "DOI1": "10.1172/JCI73066",
   "DOI2": "10.15252/embr.201540078"
 },
 {
   "name": "Department of Clinical Sciences Malmö, Lund University Diabetes Centre, Lund University",
   "DOI1": "10.1172/JCI73066"
 },
 {
   "name": "Faculty of Medicine, University of Zurich",
   "DOI1": "10.1172/JCI73066"
 },
 {
   "name": "Institute of Laboratory Animal Science, Vetmeduni Vienna",
   "DOI1": "10.1172/JCI73066"
 },
 {
   "name": "Oxford Centre for Diabetes, Endocrinology and Metabolism, University of Oxford, Churchill Hospital",
   "DOI1": "10.1172/JCI73066"
 },
 {
   "name": "Université de Lille 2, INSERM, European Genomic Institute for Diabetes",
   "DOI1": "10.1172/JCI73066"
 },
 {
   "name": "Department of Anaesthesiology and Pain Medicine, Inselspital, University of Bern",
   "DOI1": "10.15252/embr.201540078"
 },
 {
   "name": "Friedrich Miescher Institute for Biomedical Research",
   "DOI1": "10.15252/embr.201540078"
 },
 {
   "name": "Institute of Molecular Life Sciences, University of Zurich",
   "DOI1": "10.15252/embr.201540078"
 },
 {
   "name": "Swiss Institute of Bioinformatics",
   "DOI1": "10.15252/embr.201540078"
 },
 {
   "name": "University of Basel, Faculty of Science",
   "DOI1": "10.15252/embr.201540078"
 }
];
    
var links = [];         
    
    for (var k = 0; k < nodesLink.length; k++) {
    for (var l = k + 1; l < nodesLink.length; l++) {
        if (nodesLink[k].group === nodesLink[l].group) {
            links.push({
                source: nodesLink[k].id,
                target: nodesLink[l].id
            });
        }
    }
};
      
var link = wrapper.append("g")
    .attr("class", "links")
    .selectAll("line")
    .data(links)
    .enter().append("line")
      .attr("stroke-width", function(d) { return Math.sqrt(d.value); });

    
var value = [1,	2,	2,	1,	1,	1,	1,	1,	1,	1,	1,	1,	2,	1,	1,	1,	2,	1,	3,	1,	2,	1,	2,	1,	1,	2,	1,	1,	1,	1];
 
var colorbyCountry= ["Switzerland","Switzerland","Switzerland","United States","Switzerland","United Kingdom","United States","United States",
"Switzerland","Sweden","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","United States","Switzerland","Austria",
"Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","United Kingdom","Switzerland","Switzerland",
"France","Switzerland","United States"];
    
var tool_tip = d3.tip()
    .attr("class", "d3-tip")
    .offset([-8, 0])
    .html(function(d) { return d.id; });
    
wrapper.call(tool_tip);
    
var node = wrapper.append("g")
    .attr("class", "nodes")
    .selectAll("circle")
    .data(nodes)
    .enter().append("circle")
      .attr("r", function(d,i) {return Math.sqrt(value[i])*4;} )
      .attr("fill", function(d,i) {return colorScheme(colorbyCountry[i]);})
      .on('mouseover', tool_tip.show)
      .on('mouseout', tool_tip.hide)
      .on("click", function(d) {
          var obj = _.find(nodesDoi, function(o) { return o.name === d.id; });
          console.log(obj);
          var str = "";
          for (var property in obj) {
              str += property + ": " + obj[property]+"\n ";
          }
          alert(str);
          })
      .call(d3.drag()
          .on("start", dragstarted)
          .on("drag", dragged)
          .on("end", dragended));
     
simulation
      .nodes(nodes)
      .on("tick", ticked);

simulation.force("link")
      .links(links);

simulation.force("charge")
        .theta([1.5])
        .distanceMax([130]);
    
function ticked() {
    link
        .attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node
        .attr("cx", function(d) { return d.x = Math.max(5, Math.min(width - 5, d.x)); })
        .attr("cy", function(d) { return d.y = Math.max(5, Math.min(height - 5, d.y)); });
  };

function dragstarted(d) {
  if (!d3.event.active) simulation.alphaTarget(0.3).restart();
  d.fx = d.x;
  d.fy = d.y;
}

function dragged(d) {
  d.fx = d3.event.x;
  d.fy = d3.event.y;
}

function dragended(d) {
  if (!d3.event.active) simulation.alphaTarget(0);
  d.fx = null;
  d.fy = null;

}

var legendRectSize = 18;                                  

var legendRectSpacing = 4;  

var legend = wrapper.selectAll('.legend')                     
          .data(colorScheme.domain())                                   
          .enter()                                                
          .append('g')                                            
          .attr('class', 'legend')                              
         .attr('transform', function(d, i) {                     
            var height = legendRectSize + legendRectSpacing;       
            var offset =  colorScheme.domain().length;    
            var horz = 3 * legendRectSize - offset;                       
            var vert = i * height *1.35 ;                       
            return 'translate(' + horz /4 + ',' + vert + ')';        
          });     
             
legend.append('rect')                                     
       .attr('width', legendRectSize)                          
          .attr('height', 15) 
          
          .style('fill', colorScheme)                                   
          .style('stroke', colorScheme);                                

legend.append('text')                                     
          .attr('x', legendRectSize + legendRectSpacing)              
          .attr('y', legendRectSize - legendRectSpacing)              
          .text(function(d) { return d; });                         
            
</script>
</div>
 